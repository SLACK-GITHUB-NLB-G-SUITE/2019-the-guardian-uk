Young refugees held in a detention centre in Libya have described being shot at indiscriminately by militias advancing on Tripoli, in an attack that reportedly left at least two people dead and up to 20 injured. Phone footage smuggled out of the camp and passed to the Guardian highlights the deepening humanitarian crisis in the centres set up to prevent refugees and migrants from making the sea crossing from the north African coast to Europe. The footage shows people cowering in terror in the corners of a hangar while gunshots can be heard and others who appear to have been wounded lying on makeshift stretchers. The shooting on Tuesday at the Qasr bin Ghashir detention centre, 12 miles (20km) south of Tripoli, is thought to be the first time a militia has raided such a building and opened fire. Witnesses said men, women and children were praying together when soldiers they believe to be part of the forces of the military strongman Khalifa Haftar, which are advancing on the Libyan capital to try to bring down the UN-backed government, stormed into the detention centre and demanded people hand over their phones. When the occupants refused, the soldiers began shooting, according to the accounts. Phones are the only link to the outside world for many in the detention centres. Amnesty International has called for a war crimes investigation into the incident. “This incident demonstrates the urgent need for all refugees and migrants to be immediately released from these horrific detention centres,” said the organisation’s spokeswoman, Magdalena Mughrabi. The UN refugee agency, UNHCR, said it evacuated 325 people from the detention centre after the incident. A statement suggested guns were fired into air and 12 people “endured physical attacks” that required hospital treatment, but none sustained bullet wounds. “The dangers for refugees and migrants in Tripoli have never been greater than they are at present,” said Matthew Brook, the refugee agency’s deputy mission chief in Libya. “It is vital that refugees in danger can be released and evacuated to safety.” The Guardian has previously revealed there is a network of 26 Libyan detention centres, partly funded by the UK and other EU countries, where an estimated 6,000 refugees are held. Children have described being starved, beaten and abused by Libyan police and camp guards. Qasr bin Ghashir is on the frontline of the escalating battle in Libya between rival military forces. Child refugees in the camp started sending SOS messages earlier this month, saying: “The war is started. We are in a bad situation.” In WhatsApp messages sent to the Guardian on Tuesday, some of the child refugees said: “Until now, no anyone came here to help us. Not any organisations. Please, please, please, a lot of blood going out from people. Please, we are in dangerous conditions, please world, please, we are in danger.” Many of the children and young people in the detention centres have fled persecution in Eritrea and cannot return. Many have also tried to cross the Mediterranean to reach Italy, but have been pushed back by the Libyan coastguard, which receives EU funding. Giulia Tranchina, an immigration solicitor in London, has been raising the alarm for months about the plight of refugees in the centres. “I have been in touch with seven refugees in Qasr Bin Gashir since last September,. Many are sick and starving,” she said. “All of them tried to escape across the Mediterranean to Italy, but were pushed back to the detention centre by the Libyan coastguard. Some were previously imprisoned by traffickers in Libya for one to two years. Many have been recognised by UNHCR as genuine refugees.” Tranchina took a statement from a man who escaped from the centre after the militia started shooting. “We were praying in the hangar. The women joined us for prayer. The guards came in and told us to hand over our phones,” he said. “When we refused, they started shooting. I saw gunshot wounds to the head and neck, I think that without immediate medical treatment, those people would die. “I’m now in a corrugated iron shack in Tripoli with a few others who escaped, including three women with young children. Many were left behind and we have heard that they have been locked in.” The Médecins Sans Frontières project coordinator for Tripoli, Craig Kenzie said: “The reports of unarmed refugees and migrants shot at and injured in Qasr bin Ghashir are shocking. “There are nearly 900 refugees and migrants currently held in this detention centre, including more than 240 children. If verified, it is the clearest example yet of why all refugees and migrants in Tripoli detention centres must be urgently evacuated out of Libya. “We are working to verify information and are looking at all possible options to support a medical response, however, due to the fighting, our teams have been unable to access the people in this detention centre for the past two weeks.”