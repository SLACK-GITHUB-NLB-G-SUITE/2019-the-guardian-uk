Military rulers in Sudan have signed a deal with protesters to share power with civilian leaders until elections are held in around three years. The agreement comes after lengthy and difficult negotiations between generals who seized power after the fall of Omar al-Bashir in April and leaders of the pro-democracy campaign whose demonstrations led to the veteran dictator’s fall. It offers a chance to end months of political crisis and repeated bouts of violent repression. The two sides initialled a document called the “political declaration” after intense talks through the night over fine details of the agreement. The deputy chief of the ruling military council, Mohamed Hamdan Dagalo – who initialled the deal on behalf of the generals – said the agreement was a “historic moment” for Sudan. “I am pleased this morning to give this good news … to the great Sudanese people of the signing of the political agreement,” Dagalo, also known as Hemedti, said on Wednesday morning. Ibrahim al-Amin, a key protest leader, confirmed that a declaration had been agreed, and that talks on a new constitution would resume on Friday. The outlines of the deal were agreed almost two weeks ago but the military repeatedly missed deadlines to sign. One point of contention during the negotiations was a demand from civilians that military leaders remain accountable for human rights abuses committed in recent months. In June, paramilitaries broke up a peaceful sit-in in Khartoum, the capital. More than 100 people died and many more were injured in the attack. There were also reports of scores of rapes. There have been further deaths and injuries since at the hands of security forces. The violence prompted international outrage, although Sudan’s military rulers insisted they did not order the violent dispersal of protesters. Dagalo is the leader of the Rapid Support Forces, accused of committing the worst abuses in recent months. Opposition activists with knowledge of the talks told the Guardian that the signed deal includes provision for an independent and impartial investigation into the attack on the sit-in. “That was an absolute obligation for us. It is [a duty] owed to the martyrs and their families,” said one activist, who spoke on condition of anonymity. Reaction in Khartoum to news of the deal, being brokered by African Union and Ethiopian mediators, was muted on Wednesday. There have been demonstrations in recent days calling for justice for those killed during the protests. Khalda Yacoub, a 27-year-old Khartoum-based English teacher and activist, said the deal would not stop “the killing of people in this country”. “This is a political agreement, and there are divisions between the two sides. The problem is that the members of the [ruling military council] are part of the former regime and they need to change the way they deal with people,” Yacoub said. Some were optimistic, however. Mohamed Eissa, 35, an engineer who moved to Khartoum from the Darfur region, said he was “so happy”. “I think our crisis should only be solved politically,” he said. “The idea of having a radical change is impossible. This country is very fragile. I have worked in different places of Sudan and I know the amount of the weapons there are, so in our best interest is to reach to a deal.” The agreement should lead to the establishment of a new transitional civilian-military ruling body which will comprise six civilians and five military representatives. The civilians will include five from the pro-democracy coalition the Alliance for Freedom and Change. A general will head the ruling body during the first 21 months of the transition, followed by a civilian for the remaining 18 months, according to the framework agreement. That body is to oversee the formation of a transitional civilian administration that will govern for just over three years, after which elections would be held. The crisis has exacerbated a deteriorating economic situation, a consequence of 30 years of incompetent, corrupt and repressive rule by Bashir.