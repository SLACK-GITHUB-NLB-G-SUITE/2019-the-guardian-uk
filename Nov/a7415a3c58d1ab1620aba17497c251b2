The US Senate has passed legislation aimed at protecting human rights in Hong Kong amid a crackdown on the pro-democracy movement, as dozens of protester spent a fourth day stranded in a university campus. The “Hong Kong Human Rights and Democracy Act” will go to the House of Representatives, which approved its own version last month. The two chambers will have to work out their differences before any legislation can be sent to President Donald Trump for his consideration. “The people of Hong Kong see what’s coming – they see the steady effort to erode the autonomy and their freedoms,” Republican Senator Marco Rubio said at the start of the brief Senate debate, accusing Beijing of being behind the “violence and repression” in the Asian financial hub. The Senate passed a second bill, also unanimously, that would ban the export of certain crowd-control munitions to Hong Kong police forces. It bans the export of items such as tear gas, pepper spray, rubber bullets and stun guns. Under the first Senate bill, US secretary of state Mike Pompeo would have to certify at least once a year that Hong Kong retains enough autonomy to qualify for special US trading consideration that bolsters its status as a world financial centre. It also would provide for sanctions against officials responsible for human rights violations in Hong Kong. There was no immediate response from the White House, which has yet to say whether Trump would approve the legislation. The passing of the bill drew fire from China. Foreign ministry spokesman Geng Shuang said it “seriously violated international law and basic norms governing international relations. China condemns and firmly opposes it.” He slammed the bill as “whitewashing the illegal and criminal acts of Hong Kong violent elements for ulterior political purposes”, and “the pursuit of ‘human rights’ and ‘democracy’, is to boost the support of the extremists and violent elements against China and Hong Kong”. Yang Guang, a spokesman for the Chinese government’s Hong Kong and Macau Affairs Office, said: “The biggest risk Hong Kong faces now is violence, not ‘human rights’ or ‘democracy’.” He accused US politicians of applying a “double standard” and “mixing right and wrong, black and white”. On Wednesday morning, outside the Polytechnic University, the site of one of the most prolonged and tense confrontations since demonstrations in the city began five months ago, scores of riot police remained on guard, stopping the public and press entering while dozens of protesters remain holed up inside. “I don’t want to show our defeat, we’ve been holding up for so long in this movement,” a secondary school student caught inside told the Guardian by phone. He said he had tried to escape but was worried about being arrested. The secretary for security, John Lee, said on Wednesday that anyone who left the university would be arrested for rioting. Riot police have surrounded the red-brick campus since Sunday, firing teargas, rubber bullets and a water cannon at groups who tried to escape. A handful of distraught parents waited outside the cordoned off area waiting for news of their children. Several head teachers were led in by police, apparently to help them persuade their students to come out. “They just want to starve our children don’t they? I have no idea what is happening inside and I haven’t heard from my son at all,” said a mother of a year-two university student, welling up in tears. Police said by 11pm on Tuesday almost 800 people had left the Polytechnic University. Among them, 300 were under 18. Meanwhile, reports of police searching schoolchildren emerged. Two boys were seen being arrested by riot police on Wednesday morning on the first day back at school after classes were suspended for days, according to a video footage posted by respected author Kong Tsung-gan. Reuters contributed to this report