Syrian government forces have made fresh military advances towards President Bashar al-Assad’s goal of reclaiming “every inch” of the country in an offensive that has intensified fears of a humanitarian disaster in the northern Idlib province. Opposition fighters withdrew last week from the key town of Khan Sheikhoun, another strategic concession to Assad and his Russian and Iranian backers, who have torn up a ceasefire deal protecting the rebels’ last major pocket of territory. As the country’s bloody civil war grinds into its ninth year, Assad is widely acknowledged to have emerged triumphant. But the fighting is far from over, with the terms of victory and the shape of Syria’s future still very much in play on the battlefield. Armed groups are dug in across much of the north, including extremist opposition fighters in Idlib, and beyond them foreign-backed fighters including Turkish proxy militias and US-backed Kurds along sections of the border with Turkey and Iraq. Caught in the middle of the fighting, as brutal as it ever has been during this conflict, are desperate civilians. Around three million are trapped in the opposition-held province of Idlib. The area is largely controlled by Hayat Tahrir al-Sham (HTS), a former al-Qaida affiliate that came to dominate the opposition after infighting and fragmentation destroyed more moderate groups. But the civilians gathered there come from a much broader range of backgrounds, many of them opposition supporters displaced multiple times from areas that have since fallen to Assad, including Aleppo and the Damascus suburb of Ghouta. Many have fallen under HTS control without actively supporting them. The latest crisis was set in motion in April, when the Syrian government offensive shredded a truce that was agreed last year between Turkey, Iran and Russia. It had created a buffer zone between the last remaining pockets of rebel-held territory and Assad’s forces. The scale and intensity of the bombardment that followed, including attacks on health facilities and schools, led the United Nations to launch an inquiry. It will investigate government targeting of UN-backed facilities and protected civilian sites that were on a list provided to Syrian authorities. Assad claimed that his troops attacked only because Turkey did not stick to its commitments to keep extremists out of the area, which Turkey rejects. Aid agencies say civilians fleeing the military advance face desperate conditions in makeshift refugee camps without water or sanitation, and with shortages of food. With the Turkish border to the north sealed, however, they have nowhere else to go as the fighting intensifies. The Syrian authorities have opened a “humanitarian corridor” for non-combatants to leave, but it leads to government-controlled areas, and few of those trapped see it as a safe escape route. Returnees with opposition links have faced detention, conscription or worse when arriving in parts of the country ruled by Assad’s forces. Khan Sheikhoun was targeted by Assad because it gives his forces control over part of a key highway linking the central city of Homs to Syria’s battered commercial capital Aleppo, and severs an opposition supply route. But the advance into the town deepened the standoff between Turkish and Syrian forces, by cutting off Turkish troops based at one of 12 “observation points” under the ceasefire deal. Ankara said it would not move the site. “The ninth observation post remains in its place. All the other observation posts foreseen or put in place under the Idlib agreement will continue to operate where they are,” said a Turkish government spokesman, Ibrahim Kalin. The effective siege of the Turkish outpost comes days after Syrian government air strikes targeted a Turkish military convoy that Damascus claimed was trying to reinforce rebel lines, killing three civilians and injuring several others. Syria’s government has made no bones about its intentions to reunify the country, by force if necessary. The foreign minister Walid al-Moallem underlined its commitment in a meeting with the Chinese envoy to Syria, Xie Xiaoyan, in Damascus last week. The government would fight for “every inch” of Syrian territory, “in spite of the blatant Turkish intervention”, he told Xie, according to the state news agency Sana. But Turkey too is under extreme political pressure to keep Idlib free of Assad’s control, both for strategic reasons, and because of fear about the three million people clustering ever closer to its border. It already hosts more than 3.6 million refugees, who have become a political liability; authorities are trying to close refugee camps and send some of them home. Turkey would struggle to deal with a fresh influx but it fears increasing pressure to open its borders if Syrian government forces close in further on civilians gathered on the other side.Turkey’s president, Recep Tayyip Erdogan, will host his Russian and Iranian counterparts for a summit on Syria next month, he announced on Thursday. They will discuss Idlib, but also political efforts to end the war.